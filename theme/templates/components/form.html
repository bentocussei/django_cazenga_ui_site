{# 
Componente: Form
Uso: include "components/form.html" with fields=form_fields action="/submit" method="POST"

Parâmetros:
- fields: Lista de campos do formulário (obrigatório)
- action: URL de ação do formulário (opcional)
- method: GET, POST (padrão: POST)
- enctype: application/x-www-form-urlencoded, multipart/form-data (opcional)
- novalidate: true/false - desabilitar validação HTML5 (padrão: false)
- class: Classes CSS adicionais (opcional)
- x_data: Dados Alpine.js adicionais (opcional)
- on_submit: Função JavaScript no submit (opcional)

Exemplo de fields:
[
    {
        "type": "text",
        "name": "name", 
        "label": "Nome",
        "placeholder": "Digite seu nome",
        "required": true,
        "description": "Nome completo"
    },
    {
        "type": "email",
        "name": "email",
        "label": "Email", 
        "required": true,
        "error": "Email inválido"
    }
]
#}

{% with method=method|default:"POST" novalidate=novalidate|default:False %}
<form
    {% if action %}action="{{ action }}"{% endif %}
    method="{{ method }}"
    {% if enctype %}enctype="{{ enctype }}"{% endif %}
    {% if novalidate %}novalidate{% endif %}
    {% if on_submit %}@submit="{{ on_submit }}"{% endif %}
    {% if x_data %}x-data="{{ x_data }}"{% endif %}
    class="space-y-6 {{ class|default:'' }}"
>
    {% for field in fields %}
        <div class="grid gap-2">
            <!-- Label -->
            {% if field.label %}
                {% include "components/label.html" with text=field.label for=field.name required=field.required class=field.error|yesno:"text-destructive," %}
            {% endif %}
            
            <!-- Field -->
            <div class="space-y-1">
                {% if field.type == "textarea" %}
                    {% include "components/textarea.html" with name=field.name id=field.name placeholder=field.placeholder value=field.value rows=field.rows disabled=field.disabled readonly=field.readonly required=field.required maxlength=field.maxlength class=field.error|yesno:"border-destructive," %}
                
                {% elif field.type == "select" %}
                    {% include "components/select.html" with name=field.name options=field.options placeholder=field.placeholder value=field.value disabled=field.disabled searchable=field.searchable class=field.error|yesno:"border-destructive," %}
                
                {% elif field.type == "checkbox" %}
                    {% include "components/checkbox.html" with name=field.name label=field.label checked=field.checked disabled=field.disabled %}
                
                {% elif field.type == "radio" %}
                    {% include "components/radio-group.html" with name=field.name options=field.options value=field.value orientation=field.orientation disabled=field.disabled %}
                
                {% elif field.type == "switch" %}
                    {% include "components/switch.html" with name=field.name label=field.label checked=field.checked disabled=field.disabled %}
                
                {% else %}
                    <!-- Input padrão (text, email, password, etc.) -->
                    {% include "components/input.html" with type=field.type name=field.name id=field.name placeholder=field.placeholder value=field.value disabled=field.disabled readonly=field.readonly required=field.required maxlength=field.maxlength minlength=field.minlength pattern=field.pattern icon=field.icon class=field.error|yesno:"border-destructive," %}
                {% endif %}
                
                <!-- Description -->
                {% if field.description %}
                    <p class="text-muted-foreground text-sm">
                        {{ field.description }}
                    </p>
                {% endif %}
                
                <!-- Error Message -->
                {% if field.error %}
                    <p class="text-destructive text-sm">
                        {{ field.error }}
                    </p>
                {% endif %}
            </div>
        </div>
    {% endfor %}
    
    <!-- Submit Button -->
    {% if submit_button != False %}
        <div class="flex justify-end gap-3">
            {% if cancel_button %}
                {% include "components/button.html" with text=cancel_button.text|default:"Cancelar" variant="outline" type="button" onclick=cancel_button.onclick href=cancel_button.href %}
            {% endif %}
            
            {% include "components/button.html" with text=submit_button.text|default:"Enviar" variant=submit_button.variant|default:"default" type="submit" disabled=submit_button.disabled %}
        </div>
    {% endif %}
</form>
{% endwith %}
