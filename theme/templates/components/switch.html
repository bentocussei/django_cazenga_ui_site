<!--
Componente: Switch
Uso: include "components/switch.html" with name="notifications" label="Receber notificações"

Parâmetros:
- name: Nome do campo (obrigatório para formulários)
- id: ID do elemento (padrão: mesmo que name)
- label: Texto do label (opcional)
- checked: true/false (padrão: false)
- disabled: true/false (padrão: false)
- x_model: Modelo Alpine.js para two-way binding (opcional)
- class: Classes CSS adicionais (opcional)
- size: sm, default, lg (padrão: default)
-->
{% with switch_id=id|default:name|default:"switch" checked=checked|default:False disabled=disabled|default:False %}
<div class="flex items-center space-x-2 {{ class|default:'' }}">
    <button
        type="button"
        role="switch"
        {% if switch_id %}id="{{ switch_id }}"{% endif %}
        {% if switch_id %}aria-labelledby="{{ switch_id }}-label"{% endif %}
        :aria-checked="{% if x_model %}{{ x_model }}{% else %}switchChecked{% endif %}"
        @click="{% if x_model %}{{ x_model }} = !{{ x_model }}{% else %}switchChecked = !switchChecked{% endif %}"
        {% if disabled %}disabled{% endif %}
        x-data="{ {% if not x_model %}switchChecked: {{ checked|yesno:'true,false' }}{% endif %} }"
        class="peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full 
            border-2 border-transparent shadow-sm transition-colors 
            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring 
            focus-visible:ring-offset-2 focus-visible:ring-offset-background 
            disabled:cursor-not-allowed disabled:opacity-50 
            data-[state=checked]:bg-primary data-[state=unchecked]:bg-input 
            dark:data-[state=unchecked]:bg-input/30"
        :class="{
            'bg-primary': {% if x_model %}{{ x_model }}{% else %}switchChecked{% endif %},
            'bg-input dark:bg-input/30': !{% if x_model %}{{ x_model }}{% else %}switchChecked{% endif %}
        }"
    >
        <span 
            class="pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg 
                ring-0 transition-transform 
                data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0"
            :class="{
                'translate-x-4': {% if x_model %}{{ x_model }}{% else %}switchChecked{% endif %},
                'translate-x-0': !{% if x_model %}{{ x_model }}{% else %}switchChecked{% endif %}
            }"
        ></span>
    </button>
    
    {% if name %}
        <input 
            type="hidden" 
            name="{{ name }}" 
            :value="{% if x_model %}{{ x_model }}{% else %}switchChecked{% endif %} ? 'on' : ''"
        />
    {% endif %}
    
    {% if label %}
        <label 
            {% if switch_id %}id="{{ switch_id }}-label" for="{{ switch_id }}"{% endif %}
            class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
        >
            {{ label }}
        </label>
    {% endif %}
</div>
{% endwith %}
