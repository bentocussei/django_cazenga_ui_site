{# 
Componente: Alert Dialog
Uso: include "components/alert-dialog.html" with trigger="Deletar" title="Confirmar exclusão"

Parâmetros:
- trigger: Conteúdo HTML do trigger (obrigatório)
- title: Título do dialog (obrigatório)
- description: Descrição/conteúdo do dialog (obrigatório)
- action_text: Texto do botão de ação (padrão: "Confirmar")
- cancel_text: Texto do botão cancelar (padrão: "Cancelar")
- action_variant: Variante do botão de ação (padrão: destructive)
- cancel_variant: Variante do botão cancelar (padrão: outline)
- action_onclick: Função JavaScript para o botão de ação (opcional)
- cancel_onclick: Função JavaScript para o botão cancelar (opcional)
- size: sm, md, lg (padrão: md)
- icon: Ícone SVG para o dialog (opcional)
- class: Classes CSS adicionais (opcional)

Exemplo:
{% include "components/alert-dialog.html" with 
    trigger="<button class='btn btn-destructive'>Deletar</button>"
    title="Confirmar exclusão"
    description="Esta ação não pode ser desfeita. O item será permanentemente removido."
    action_text="Sim, deletar"
    action_onclick="alert('Item deletado!')" %}
#}

{% with action_text=action_text|default:"Confirmar" cancel_text=cancel_text|default:"Cancelar" action_variant=action_variant|default:"destructive" cancel_variant=cancel_variant|default:"outline" size=size|default:"md" %}
<div 
    x-data="{ open: false }"
    @keydown.escape.window="open = false"
    class="{{ class|default:'' }}"
>
    <!-- Trigger -->
    <div @click="open = true">
        {{ trigger|safe }}
    </div>

    <!-- Alert Dialog Overlay and Content -->
    <div 
        x-show="open"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        class="fixed inset-0 z-50 bg-black/50"
        style="display: none;"
    >
        <!-- Dialog Content -->
        <div 
            @click.stop
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 scale-95"
            x-transition:enter-end="opacity-100 scale-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 scale-100"
            x-transition:leave-end="opacity-0 scale-95"
            class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background rounded-lg border shadow-lg w-full max-w-[calc(100%-2rem)] p-6
                {% if size == 'sm' %}sm:max-w-sm
                {% elif size == 'lg' %}sm:max-w-lg
                {% else %}sm:max-w-md{% endif %}"
            role="alertdialog"
            aria-modal="true"
            :aria-labelledby="$id('alert-title')"
            :aria-describedby="$id('alert-desc')"
        >
            <!-- Header -->
            <div class="flex flex-col gap-2 text-center sm:text-left mb-4">
                {% if icon %}
                    <div class="mx-auto sm:mx-0 flex size-12 items-center justify-center rounded-full bg-destructive/10 mb-2">
                        <div class="[&_svg]:size-6 [&_svg]:text-destructive">
                            {{ icon|safe }}
                        </div>
                    </div>
                {% endif %}
                
                <h2 
                    :id="$id('alert-title')"
                    class="text-lg font-semibold"
                >
                    {{ title }}
                </h2>
                
                <p 
                    :id="$id('alert-desc')"
                    class="text-sm text-muted-foreground"
                >
                    {{ description }}
                </p>
            </div>

            <!-- Footer -->
            <div class="flex flex-col-reverse gap-2 sm:flex-row sm:justify-end">
                <!-- Cancel Button -->
                <button
                    @click="open = false; {% if cancel_onclick %}{{ cancel_onclick }}{% endif %}"
                    type="button"
                    class="inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50
                        {% if cancel_variant == 'default' %}bg-primary text-primary-foreground hover:bg-primary/90
                        {% elif cancel_variant == 'destructive' %}bg-destructive text-destructive-foreground hover:bg-destructive/90
                        {% elif cancel_variant == 'outline' %}border border-input bg-background hover:bg-accent hover:text-accent-foreground
                        {% elif cancel_variant == 'secondary' %}bg-secondary text-secondary-foreground hover:bg-secondary/80
                        {% elif cancel_variant == 'ghost' %}hover:bg-accent hover:text-accent-foreground
                        {% elif cancel_variant == 'link' %}text-primary underline-offset-4 hover:underline
                        {% else %}border border-input bg-background hover:bg-accent hover:text-accent-foreground{% endif %}"
                >
                    {{ cancel_text }}
                </button>
                
                <!-- Action Button -->
                <button
                    @click="open = false; {% if action_onclick %}{{ action_onclick }}{% endif %}"
                    type="button"
                    class="inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50
                        {% if action_variant == 'default' %}bg-primary text-primary-foreground hover:bg-primary/90
                        {% elif action_variant == 'destructive' %}bg-destructive text-destructive-foreground hover:bg-destructive/90
                        {% elif action_variant == 'outline' %}border border-input bg-background hover:bg-accent hover:text-accent-foreground
                        {% elif action_variant == 'secondary' %}bg-secondary text-secondary-foreground hover:bg-secondary/80
                        {% elif action_variant == 'ghost' %}hover:bg-accent hover:text-accent-foreground
                        {% elif action_variant == 'link' %}text-primary underline-offset-4 hover:underline
                        {% else %}bg-destructive text-destructive-foreground hover:bg-destructive/90{% endif %}"
                >
                    {{ action_text }}
                </button>
            </div>
        </div>
    </div>
</div>
{% endwith %}
