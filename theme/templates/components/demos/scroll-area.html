{% extends "components_base.html" %}
{% load icon_tags %}

{% block page_title %}Scroll Area{% endblock %}
{% block page_description %}Componente para áreas de rolagem customizadas e estilizadas{% endblock %}

{% block component_content %}
<div class="max-w-4xl mx-auto space-y-8">
    <!-- Instalação -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Instalação</h2>
        <div class="relative">
            <pre class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto"><code>{% templatetag openblock %} include "components/scroll-area.html" with height="300px" content="..." {% templatetag closeblock %}</code></pre>
            <button 
                class="absolute top-2 right-2 p-2 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                x-data="{ copied: false }"
                @click="navigator.clipboard.writeText($el.previousElementSibling.textContent); copied = true; setTimeout(() => copied = false, 2000)"
            >
                <span x-show="!copied">{% icon "copy" size="4" %}</span>
                <span x-show="copied" class="text-green-600">{% icon "check" size="4" %}</span>
            </button>
        </div>
    </section>

    <!-- Scroll Area Básica -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Scroll Area Básica</h2>
        <div class="border rounded-lg overflow-hidden">
            <div class="h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800">
                <div class="p-4 space-y-3">
                    {% for item in scroll_area_data.long_content %}
                    <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                        <p class="text-gray-700 dark:text-gray-300">{{ item }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- Scroll Area Horizontal -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Scroll Area Horizontal</h2>
        <div class="border rounded-lg overflow-hidden">
            <div class="h-32 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800">
                <div class="flex space-x-4 p-4" style="width: 1200px;">
                    {% for item in scroll_area_data.horizontal_content %}
                    <div class="flex-shrink-0 w-64 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-medium">
                        {{ item }}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- Scroll Area Customizada -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Scroll Area Customizada</h2>
        <div class="border rounded-lg overflow-hidden">
            <div class="h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-blue-500 scrollbar-track-blue-100 dark:scrollbar-thumb-blue-400 dark:scrollbar-track-blue-900/20 hover:scrollbar-thumb-blue-600 dark:hover:scrollbar-thumb-blue-300">
                <div class="p-4 space-y-4">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-blue-900 dark:text-blue-100 mb-2">Seção 1</h3>
                        <p class="text-blue-700 dark:text-blue-300">Conteúdo da primeira seção com rolagem customizada em azul.</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-green-900 dark:text-green-100 mb-2">Seção 2</h3>
                        <p class="text-green-700 dark:text-green-300">Segunda seção com mais conteúdo para demonstrar a rolagem.</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-purple-900 dark:text-purple-100 mb-2">Seção 3</h3>
                        <p class="text-purple-700 dark:text-purple-300">Terceira seção continuando o conteúdo rolável.</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-yellow-900 dark:text-yellow-100 mb-2">Seção 4</h3>
                        <p class="text-yellow-700 dark:text-yellow-300">Quarta seção com gradiente amarelo-laranja.</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-red-900 dark:text-red-100 mb-2">Seção 5</h3>
                        <p class="text-red-700 dark:text-red-300">Quinta seção finalizando o conteúdo da área de rolagem.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scroll Area com Fade -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Scroll Area com Fade</h2>
        <div class="border rounded-lg overflow-hidden">
            <div class="relative">
                <div class="h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800">
                    <div class="p-4 space-y-3">
                        {% for item in scroll_area_data.long_content %}
                        <div class="p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                            <p class="text-gray-700 dark:text-gray-300">{{ item }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- Fade overlays -->
                <div class="absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-white dark:from-gray-900 to-transparent pointer-events-none"></div>
                <div class="absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-white dark:from-gray-900 to-transparent pointer-events-none"></div>
            </div>
        </div>
    </section>

    <!-- Scroll Area Interativa -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Scroll Area Interativa</h2>
        <div class="border rounded-lg overflow-hidden">
            <div class="bg-gray-50 dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">
                <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-2">Lista de Tarefas</h3>
                <div class="text-sm text-gray-600 dark:text-gray-400">
                    <span x-data="{ scrollTop: 0 }" 
                          x-ref="scrollIndicator"
                          x-init="$watch('scrollTop', value => {
                              const percentage = Math.round((value / ($refs.scrollContainer.scrollHeight - $refs.scrollContainer.clientHeight)) * 100);
                              $refs.scrollIndicator.textContent = `Rolagem: ${percentage}%`;
                          })">
                        Rolagem: 0%
                    </span>
                </div>
            </div>
            
            <div x-data="{ 
                tasks: [
                    { id: 1, text: 'Revisar documentação', completed: false },
                    { id: 2, text: 'Implementar novos recursos', completed: true },
                    { id: 3, text: 'Testar integração', completed: false },
                    { id: 4, text: 'Corrigir bugs reportados', completed: true },
                    { id: 5, text: 'Otimizar performance', completed: false },
                    { id: 6, text: 'Atualizar dependências', completed: false },
                    { id: 7, text: 'Escrever testes unitários', completed: true },
                    { id: 8, text: 'Configurar CI/CD', completed: false },
                    { id: 9, text: 'Documentar API', completed: false },
                    { id: 10, text: 'Preparar release', completed: false }
                ],
                toggleTask(taskId) {
                    const task = this.tasks.find(t => t.id === taskId);
                    if (task) task.completed = !task.completed;
                }
            }">
                <div class="h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800"
                     x-ref="scrollContainer"
                     @scroll="$refs.scrollIndicator.scrollTop = $el.scrollTop">
                    <div class="p-4 space-y-2">
                        <template x-for="task in tasks" :key="task.id">
                            <div class="flex items-center space-x-3 p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                <input 
                                    type="checkbox" 
                                    :checked="task.completed"
                                    @change="toggleTask(task.id)"
                                    class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"
                                >
                                <span 
                                    :class="task.completed ? 'line-through text-gray-500 dark:text-gray-400' : 'text-gray-900 dark:text-gray-100'"
                                    class="flex-1 transition-all duration-200"
                                    x-text="task.text">
                                </span>
                                <button 
                                    @click="tasks = tasks.filter(t => t.id !== task.id)"
                                    class="text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors"
                                >
                                    {% icon "trash" size="4" %}
                                </button>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scroll Area Infinita -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Scroll Area Infinita</h2>
        <div class="border rounded-lg overflow-hidden">
            <div class="bg-gray-50 dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">
                <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-1">Feed de Notícias</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400">Role para baixo para carregar mais conteúdo</p>
            </div>
            
            <div x-data="{ 
                items: Array.from({length: 20}, (_, i) => ({
                    id: i + 1,
                    title: `Notícia ${i + 1}`,
                    content: `Esta é a descrição da notícia ${i + 1}. Lorem ipsum dolor sit amet, consectetur adipiscing elit.`,
                    time: `${Math.floor(Math.random() * 12) + 1}h atrás`
                })),
                loading: false,
                loadMore() {
                    if (this.loading) return;
                    this.loading = true;
                    
                    // Simula carregamento
                    setTimeout(() => {
                        const newItems = Array.from({length: 10}, (_, i) => ({
                            id: this.items.length + i + 1,
                            title: `Notícia ${this.items.length + i + 1}`,
                            content: `Esta é a descrição da notícia ${this.items.length + i + 1}. Lorem ipsum dolor sit amet.`,
                            time: `${Math.floor(Math.random() * 12) + 1}h atrás`
                        }));
                        this.items = [...this.items, ...newItems];
                        this.loading = false;
                    }, 1000);
                }
            }">
                <div class="h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800"
                     @scroll="if ($el.scrollTop + $el.clientHeight >= $el.scrollHeight - 50) loadMore()">
                    <div class="p-4 space-y-3">
                        <template x-for="item in items" :key="item.id">
                            <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                                <div class="flex items-start justify-between">
                                    <div class="flex-1">
                                        <h4 class="font-medium text-gray-900 dark:text-gray-100" x-text="item.title"></h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1" x-text="item.content"></p>
                                    </div>
                                    <span class="text-xs text-gray-500 dark:text-gray-400 ml-4" x-text="item.time"></span>
                                </div>
                            </div>
                        </template>
                        
                        <!-- Loading indicator -->
                        <div x-show="loading" class="flex justify-center py-4">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scroll Area com Minimap -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Scroll Area com Minimap</h2>
        <div class="border rounded-lg overflow-hidden">
            <div class="flex">
                <div class="flex-1">
                    <div class="h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800"
                         x-data="{ scrollTop: 0 }"
                         x-ref="contentArea"
                         @scroll="scrollTop = $el.scrollTop">
                        <div class="p-4 space-y-6">
                            <div class="bg-red-100 dark:bg-red-900/20 p-4 rounded-lg">
                                <h3 class="font-semibold text-red-900 dark:text-red-100">Seção Vermelha</h3>
                                <p class="text-red-700 dark:text-red-300">Conteúdo da seção vermelha.</p>
                            </div>
                            
                            <div class="bg-blue-100 dark:bg-blue-900/20 p-4 rounded-lg">
                                <h3 class="font-semibold text-blue-900 dark:text-blue-100">Seção Azul</h3>
                                <p class="text-blue-700 dark:text-blue-300">Conteúdo da seção azul.</p>
                            </div>
                            
                            <div class="bg-green-100 dark:bg-green-900/20 p-4 rounded-lg">
                                <h3 class="font-semibold text-green-900 dark:text-green-100">Seção Verde</h3>
                                <p class="text-green-700 dark:text-green-300">Conteúdo da seção verde.</p>
                            </div>
                            
                            <div class="bg-yellow-100 dark:bg-yellow-900/20 p-4 rounded-lg">
                                <h3 class="font-semibold text-yellow-900 dark:text-yellow-100">Seção Amarela</h3>
                                <p class="text-yellow-700 dark:text-yellow-300">Conteúdo da seção amarela.</p>
                            </div>
                            
                            <div class="bg-purple-100 dark:bg-purple-900/20 p-4 rounded-lg">
                                <h3 class="font-semibold text-purple-900 dark:text-purple-100">Seção Roxa</h3>
                                <p class="text-purple-700 dark:text-purple-300">Conteúdo da seção roxa.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Minimap -->
                <div class="w-16 bg-gray-50 dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700">
                    <div class="h-64 relative">
                        <div class="absolute inset-0 p-1 space-y-1">
                            <div class="h-8 bg-red-300 dark:bg-red-600 rounded-sm"></div>
                            <div class="h-8 bg-blue-300 dark:bg-blue-600 rounded-sm"></div>
                            <div class="h-8 bg-green-300 dark:bg-green-600 rounded-sm"></div>
                            <div class="h-8 bg-yellow-300 dark:bg-yellow-600 rounded-sm"></div>
                            <div class="h-8 bg-purple-300 dark:bg-purple-600 rounded-sm"></div>
                        </div>
                        
                        <!-- Viewport indicator -->
                        <div class="absolute left-0 right-0 bg-gray-800 dark:bg-gray-200 bg-opacity-30 dark:bg-opacity-30 border-y border-gray-600 dark:border-gray-400"
                             :style="'top: ' + (scrollTop / ($refs.contentArea.scrollHeight - $refs.contentArea.clientHeight)) * 100 + '%; height: ' + ($refs.contentArea.clientHeight / $refs.contentArea.scrollHeight) * 100 + '%'">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Parâmetros -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Parâmetros</h2>
        <div class="border rounded-lg overflow-hidden">
            <table class="w-full">
                <thead class="bg-gray-50 dark:bg-gray-800">
                    <tr>
                        {% for header in scroll_area_params.headers %}
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            {{ header }}
                        </th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                    {% for row in scroll_area_params.data %}
                    <tr>
                        {% for cell in row %}
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
                            {{ cell|safe }}
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>
</div>

<style>
    .scrollbar-thin::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }
    
    .scrollbar-thin::-webkit-scrollbar-track {
        border-radius: 4px;
    }
    
    .scrollbar-thin::-webkit-scrollbar-thumb {
        border-radius: 4px;
    }
    
    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        opacity: 0.8;
    }
</style>
{% endblock %} 