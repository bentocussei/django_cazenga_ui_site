{% extends "components_base.html" %}
{% load icon_tags %}

{% block page_title %}Carousel{% endblock %}
{% block page_description %}Carrosséis interativos para exibição de conteúdo em slides{% endblock %}

{% block component_content %}
<div class="max-w-4xl mx-auto space-y-8">
    <!-- Instalação -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Instalação</h2>
        <div class="relative">
            <pre class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto"><code>{% templatetag openblock %} include "components/carousel.html" with items=carousel_items autoplay=true controls=true {% templatetag closeblock %}</code></pre>
            <button 
                class="absolute top-2 right-2 p-2 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                x-data="{ copied: false }"
                @click="navigator.clipboard.writeText($el.previousElementSibling.textContent); copied = true; setTimeout(() => copied = false, 2000)"
            >
                <span x-show="!copied">{% icon "copy" size="4" %}</span>
                <span x-show="copied" class="text-green-600">{% icon "check" size="4" %}</span>
            </button>
        </div>
    </section>

    <!-- Carousel Básico -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Carousel Básico</h2>
        <div class="border rounded-lg p-6">
            <div class="space-y-4">
                <div class="text-sm text-gray-600 dark:text-gray-400">
                    Carousel simples com navegação manual
                </div>
                <div class="relative max-w-2xl mx-auto" x-data="{ currentSlide: 0, slides: [
                    { image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=400&fit=crop', title: 'Paisagem 1', description: 'Uma bela vista montanhosa ao amanhecer' },
                    { image: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800&h=400&fit=crop', title: 'Paisagem 2', description: 'Floresta densa com névoa matinal' },
                    { image: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&h=400&fit=crop', title: 'Paisagem 3', description: 'Campo aberto sob céu estrelado' }
                ] }">
                    <!-- Container do Carousel -->
                    <div class="relative overflow-hidden rounded-lg bg-gray-200 dark:bg-gray-700">
                        <div class="relative h-64 sm:h-80">
                            <template x-for="(slide, index) in slides" :key="index">
                                <div x-show="currentSlide === index" 
                                     x-transition:enter="transition ease-out duration-300"
                                     x-transition:enter-start="opacity-0 transform translate-x-full"
                                     x-transition:enter-end="opacity-100 transform translate-x-0"
                                     x-transition:leave="transition ease-in duration-300"
                                     x-transition:leave-start="opacity-100 transform translate-x-0"
                                     x-transition:leave-end="opacity-0 transform -translate-x-full"
                                     class="absolute inset-0">
                                    <img :src="slide.image" :alt="slide.title" class="w-full h-full object-cover">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                                    <div class="absolute bottom-4 left-4 text-white">
                                        <h3 class="text-xl font-bold" x-text="slide.title"></h3>
                                        <p class="text-sm opacity-90" x-text="slide.description"></p>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- Controles -->
                        <button @click="currentSlide = currentSlide === 0 ? slides.length - 1 : currentSlide - 1" 
                                class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full backdrop-blur-sm transition-colors">
                            {% icon "chevron-left" size="5" %}
                        </button>
                        <button @click="currentSlide = currentSlide === slides.length - 1 ? 0 : currentSlide + 1" 
                                class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full backdrop-blur-sm transition-colors">
                            {% icon "chevron-right" size="5" %}
                        </button>

                        <!-- Indicadores -->
                        <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2">
                            <template x-for="(slide, index) in slides" :key="index">
                                <button @click="currentSlide = index" 
                                        :class="{ 'bg-white': currentSlide === index, 'bg-white/50': currentSlide !== index }" 
                                        class="w-2 h-2 rounded-full transition-colors"></button>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="relative">
            <pre class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto text-sm"><code>&lt;div x-data="{ currentSlide: 0, slides: [...] }" class="relative overflow-hidden rounded-lg"&gt;
    &lt;div class="relative h-64"&gt;
        &lt;template x-for="(slide, index) in slides"&gt;
            &lt;div x-show="currentSlide === index" 
                 x-transition
                 class="absolute inset-0"&gt;
                &lt;img :src="slide.image" :alt="slide.title" class="w-full h-full object-cover"&gt;
            &lt;/div&gt;
        &lt;/template&gt;
    &lt;/div&gt;
    
    &lt;!-- Controles e Indicadores --&gt;
&lt;/div&gt;</code></pre>
            <button 
                class="absolute top-2 right-2 p-2 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                x-data="{ copied: false }"
                @click="navigator.clipboard.writeText($el.previousElementSibling.textContent); copied = true; setTimeout(() => copied = false, 2000)"
            >
                <span x-show="!copied">{% icon "copy" size="4" %}</span>
                <span x-show="copied" class="text-green-600">{% icon "check" size="4" %}</span>
            </button>
        </div>
    </section>

    <!-- Carousel com Autoplay -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Carousel com Autoplay</h2>
        <div class="border rounded-lg p-6">
            <div class="space-y-4">
                <div class="text-sm text-gray-600 dark:text-gray-400">
                    Carousel que avança automaticamente com controle de pausa
                </div>
                <div class="relative max-w-2xl mx-auto" x-data="{
                    currentSlide: 0,
                    isPlaying: true,
                    interval: null,
                    slides: [
                        { image: 'https://images.unsplash.com/photo-1557804506-669a67965ba0?w=800&h=400&fit=crop', title: 'Tecnologia', description: 'Inovação em cada detalhe' },
                        { image: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=400&fit=crop', title: 'Negócios', description: 'Soluções para o seu crescimento' },
                        { image: 'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?w=800&h=400&fit=crop', title: 'Criatividade', description: 'Transformando ideias em realidade' }
                    ],
                    init() {
                        this.startAutoplay();
                    },
                    startAutoplay() {
                        if (this.interval) clearInterval(this.interval);
                        this.interval = setInterval(() => {
                            if (this.isPlaying) {
                                this.nextSlide();
                            }
                        }, 3000);
                    },
                    nextSlide() {
                        this.currentSlide = this.currentSlide === this.slides.length - 1 ? 0 : this.currentSlide + 1;
                    },
                    prevSlide() {
                        this.currentSlide = this.currentSlide === 0 ? this.slides.length - 1 : this.currentSlide - 1;
                    },
                    togglePlayPause() {
                        this.isPlaying = !this.isPlaying;
                    }
                }">
                    <!-- Container do Carousel -->
                    <div class="relative overflow-hidden rounded-lg bg-gray-200 dark:bg-gray-700">
                        <div class="relative h-64 sm:h-80">
                            <template x-for="(slide, index) in slides" :key="index">
                                <div x-show="currentSlide === index" 
                                     x-transition:enter="transition ease-out duration-500"
                                     x-transition:enter-start="opacity-0"
                                     x-transition:enter-end="opacity-100"
                                     x-transition:leave="transition ease-in duration-500"
                                     x-transition:leave-start="opacity-100"
                                     x-transition:leave-end="opacity-0"
                                     class="absolute inset-0">
                                    <img :src="slide.image" :alt="slide.title" class="w-full h-full object-cover">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                                    <div class="absolute bottom-6 left-6 text-white">
                                        <h3 class="text-2xl font-bold mb-2" x-text="slide.title"></h3>
                                        <p class="text-sm opacity-90" x-text="slide.description"></p>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- Controles -->
                        <button @click="prevSlide()" 
                                class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full backdrop-blur-sm transition-colors">
                            {% icon "chevron-left" size="6" %}
                        </button>
                        <button @click="nextSlide()" 
                                class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full backdrop-blur-sm transition-colors">
                            {% icon "chevron-right" size="6" %}
                        </button>

                        <!-- Play/Pause -->
                        <button @click="togglePlayPause()" 
                                class="absolute top-4 right-4 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full backdrop-blur-sm transition-colors">
                            <span x-show="isPlaying">{% icon "pause" size="4" %}</span>
                            <span x-show="!isPlaying">{% icon "play" size="4" %}</span>
                        </button>

                        <!-- Progress Bar -->
                        <div class="absolute bottom-0 left-0 w-full h-1 bg-black/20">
                            <div class="h-full bg-white transition-all duration-300" 
                                 :style="`width: ${((currentSlide + 1) / slides.length) * 100}%`"></div>
                        </div>

                        <!-- Indicadores -->
                        <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex space-x-3">
                            <template x-for="(slide, index) in slides" :key="index">
                                <button @click="currentSlide = index" 
                                        :class="{ 'bg-white scale-125': currentSlide === index, 'bg-white/50': currentSlide !== index }" 
                                        class="w-3 h-3 rounded-full transition-all duration-300"></button>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Carousel de Cards -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Carousel de Cards</h2>
        <div class="border rounded-lg p-6">
            <div class="space-y-4">
                <div class="text-sm text-gray-600 dark:text-gray-400">
                    Carousel horizontal com múltiplos itens visíveis
                </div>
                <div class="relative" x-data="{
                    currentIndex: 0,
                    itemsPerView: 3,
                    products: [
                        { id: 1, name: 'MacBook Pro', price: 'R$ 12.999', image: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=300&h=200&fit=crop' },
                        { id: 2, name: 'iPhone 15', price: 'R$ 7.999', image: 'https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=300&h=200&fit=crop' },
                        { id: 3, name: 'iPad Air', price: 'R$ 4.999', image: 'https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=300&h=200&fit=crop' },
                        { id: 4, name: 'Apple Watch', price: 'R$ 2.999', image: 'https://images.unsplash.com/photo-1579586337278-3f436f25d4d2?w=300&h=200&fit=crop' },
                        { id: 5, name: 'AirPods Pro', price: 'R$ 1.999', image: 'https://images.unsplash.com/photo-1606220588913-b3aacb4d2f46?w=300&h=200&fit=crop' },
                        { id: 6, name: 'Magic Mouse', price: 'R$ 899', image: 'https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=300&h=200&fit=crop' }
                    ],
                    get maxIndex() {
                        return Math.max(0, this.products.length - this.itemsPerView);
                    },
                    nextProducts() {
                        if (this.currentIndex < this.maxIndex) {
                            this.currentIndex++;
                        }
                    },
                    prevProducts() {
                        if (this.currentIndex > 0) {
                            this.currentIndex--;
                        }
                    }
                }">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold">Produtos em Destaque</h3>
                        <div class="flex space-x-2">
                            <button @click="prevProducts()" 
                                    :disabled="currentIndex === 0"
                                    :class="{ 'opacity-50 cursor-not-allowed': currentIndex === 0 }"
                                    class="p-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors">
                                {% icon "chevron-left" size="4" %}
                            </button>
                            <button @click="nextProducts()" 
                                    :disabled="currentIndex >= maxIndex"
                                    :class="{ 'opacity-50 cursor-not-allowed': currentIndex >= maxIndex }"
                                    class="p-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors">
                                {% icon "chevron-right" size="4" %}
                            </button>
                        </div>
                    </div>

                    <div class="overflow-hidden">
                        <div class="flex transition-transform duration-300 ease-in-out"
                             :style="`transform: translateX(-${currentIndex * (100 / itemsPerView)}%)`">
                            <template x-for="product in products" :key="product.id">
                                <div class="flex-shrink-0 w-1/3 px-2">
                                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow">
                                        <img :src="product.image" :alt="product.name" class="w-full h-32 object-cover">
                                        <div class="p-4">
                                            <h4 class="font-medium text-gray-900 dark:text-gray-100" x-text="product.name"></h4>
                                            <p class="text-sm text-blue-600 dark:text-blue-400 font-semibold mt-1" x-text="product.price"></p>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Indicadores -->
                    <div class="flex justify-center mt-4 space-x-2">
                        <template x-for="i in (maxIndex + 1)" :key="i">
                            <button @click="currentIndex = i - 1" 
                                    :class="{ 'bg-blue-500': currentIndex === (i - 1), 'bg-gray-300 dark:bg-gray-600': currentIndex !== (i - 1) }" 
                                    class="w-2 h-2 rounded-full transition-colors"></button>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Carousel Vertical -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Carousel Vertical</h2>
        <div class="border rounded-lg p-6">
            <div class="space-y-4">
                <div class="text-sm text-gray-600 dark:text-gray-400">
                    Carousel com orientação vertical
                </div>
                <div class="flex justify-center">
                    <div class="relative w-80" x-data="{
                        currentSlide: 0,
                        testimonials: [
                            { name: 'Ana Silva', role: 'CEO, TechCorp', content: 'Excelente serviço! Superou todas as nossas expectativas e entregou resultados incríveis.', avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face' },
                            { name: 'Carlos Santos', role: 'CTO, InnovaCorp', content: 'A qualidade do trabalho é impressionante. Definitivamente recomendaria para outras empresas.', avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face' },
                            { name: 'Maria Oliveira', role: 'Diretora, CreativeLab', content: 'Profissionalismo e dedicação em cada detalhe. Uma experiência única de colaboração.', avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face' }
                        ]
                    }">
                        <div class="relative overflow-hidden bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700">
                            <div class="relative h-64">
                                <template x-for="(testimonial, index) in testimonials" :key="index">
                                    <div x-show="currentSlide === index" 
                                         x-transition:enter="transition ease-out duration-300"
                                         x-transition:enter-start="opacity-0 transform translate-y-4"
                                         x-transition:enter-end="opacity-100 transform translate-y-0"
                                         x-transition:leave="transition ease-in duration-300"
                                         x-transition:leave-start="opacity-100 transform translate-y-0"
                                         x-transition:leave-end="opacity-0 transform -translate-y-4"
                                         class="absolute inset-0 p-6 flex flex-col justify-center">
                                        <div class="text-center">
                                            <img :src="testimonial.avatar" :alt="testimonial.name" class="w-16 h-16 rounded-full mx-auto mb-4 object-cover">
                                            <blockquote class="text-gray-700 dark:text-gray-300 mb-4 italic text-sm leading-relaxed">
                                                "<span x-text="testimonial.content"></span>"
                                            </blockquote>
                                            <div>
                                                <div class="font-semibold text-gray-900 dark:text-gray-100" x-text="testimonial.name"></div>
                                                <div class="text-sm text-gray-500 dark:text-gray-400" x-text="testimonial.role"></div>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>

                            <!-- Controles -->
                            <button @click="currentSlide = currentSlide === 0 ? testimonials.length - 1 : currentSlide - 1" 
                                    class="absolute left-1/2 top-2 -translate-x-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-1 rounded-full transition-colors">
                                {% icon "chevron-up" size="4" %}
                            </button>
                            <button @click="currentSlide = currentSlide === testimonials.length - 1 ? 0 : currentSlide + 1" 
                                    class="absolute left-1/2 bottom-2 -translate-x-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-1 rounded-full transition-colors">
                                {% icon "chevron-down" size="4" %}
                            </button>

                            <!-- Indicadores -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col space-y-2">
                                <template x-for="(testimonial, index) in testimonials" :key="index">
                                    <button @click="currentSlide = index" 
                                            :class="{ 'bg-blue-500': currentSlide === index, 'bg-gray-300 dark:bg-gray-600': currentSlide !== index }" 
                                            class="w-2 h-2 rounded-full transition-colors"></button>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Carousel com Thumbnails -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Carousel com Thumbnails</h2>
        <div class="border rounded-lg p-6">
            <div class="space-y-4">
                <div class="text-sm text-gray-600 dark:text-gray-400">
                    Carousel principal com galeria de thumbnails para navegação
                </div>
                <div class="max-w-2xl mx-auto" x-data="{
                    currentSlide: 0,
                    gallery: [
                        { main: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800&h=600&fit=crop', thumb: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=75&fit=crop', title: 'Fones Premium' },
                        { main: 'https://images.unsplash.com/photo-1583394838336-acd977736f90?w=800&h=600&fit=crop', thumb: 'https://images.unsplash.com/photo-1583394838336-acd977736f90?w=100&h=75&fit=crop', title: 'Smartphone Moderno' },
                        { main: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800&h=600&fit=crop', thumb: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=100&h=75&fit=crop', title: 'Tênis Esportivo' },
                        { main: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=800&h=600&fit=crop', thumb: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=100&h=75&fit=crop', title: 'Relógio Elegante' }
                    ]
                }">
                    <!-- Imagem Principal -->
                    <div class="relative overflow-hidden rounded-lg bg-gray-200 dark:bg-gray-700 mb-4">
                        <div class="relative h-80">
                            <template x-for="(item, index) in gallery" :key="index">
                                <div x-show="currentSlide === index" 
                                     x-transition:enter="transition ease-out duration-300"
                                     x-transition:enter-start="opacity-0"
                                     x-transition:enter-end="opacity-100"
                                     x-transition:leave="transition ease-in duration-300"
                                     x-transition:leave-start="opacity-100"
                                     x-transition:leave-end="opacity-0"
                                     class="absolute inset-0">
                                    <img :src="item.main" :alt="item.title" class="w-full h-full object-cover">
                                    <div class="absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm backdrop-blur-sm">
                                        <span x-text="item.title"></span>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- Controles -->
                        <button @click="currentSlide = currentSlide === 0 ? gallery.length - 1 : currentSlide - 1" 
                                class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full backdrop-blur-sm transition-colors">
                            {% icon "chevron-left" size="5" %}
                        </button>
                        <button @click="currentSlide = currentSlide === gallery.length - 1 ? 0 : currentSlide + 1" 
                                class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full backdrop-blur-sm transition-colors">
                            {% icon "chevron-right" size="5" %}
                        </button>
                    </div>

                    <!-- Thumbnails -->
                    <div class="flex space-x-2 overflow-x-auto pb-2">
                        <template x-for="(item, index) in gallery" :key="index">
                            <button @click="currentSlide = index" 
                                    :class="{ 'ring-2 ring-blue-500': currentSlide === index, 'opacity-60': currentSlide !== index }" 
                                    class="flex-shrink-0 relative overflow-hidden rounded-md transition-all duration-200 hover:opacity-100">
                                <img :src="item.thumb" :alt="item.title" class="w-20 h-15 object-cover">
                                <div x-show="currentSlide === index" class="absolute inset-0 bg-blue-500/20"></div>
                            </button>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Parâmetros -->
    <section class="space-y-4">
        <h2 class="text-2xl font-semibold">Parâmetros</h2>
        <div class="border rounded-lg overflow-hidden">
            <table class="w-full">
                <thead class="bg-gray-50 dark:bg-gray-800">
                    <tr>
                        {% for header in carousel_params.headers %}
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            {{ header }}
                        </th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                    {% for row in carousel_params.data %}
                    <tr>
                        {% for cell in row %}
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
                            {{ cell|safe }}
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>
</div>
{% endblock %} 