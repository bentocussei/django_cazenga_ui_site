{% extends 'components_base.html' %}

{% block page_title %}Form{% endblock %}
{% block page_description %}Formulários robustos com validação, diferentes tipos de campos e layouts responsivos.{% endblock %}

{% block component_content %}
<div class="max-w-4xl mx-auto space-y-8">
    <!-- Instalação -->
    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Instalação</h2>
        <div class="relative">
            <pre class="bg-gray-100 p-4 rounded-md overflow-x-auto"><code>{% verbatim %}{% include 'components/form.html' %}{% endverbatim %}</code></pre>
            <button 
                class="absolute top-2 right-2 p-2 bg-white rounded-md shadow-sm hover:bg-gray-50 border"
                x-data 
                @click="navigator.clipboard.writeText('{% verbatim %}{% include \'components/form.html\' %}{% endverbatim %}')"
                title="Copiar código"
            >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Exemplo Básico -->
    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Exemplo Básico</h2>
        <div class="border rounded-lg p-6">
            <form class="space-y-6" x-data="{ formData: { firstName: '', lastName: '', email: '', phone: '' } }">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="firstName" class="block text-sm font-medium text-gray-700">Nome</label>
                        <input 
                            type="text" 
                            id="firstName" 
                            x-model="formData.firstName"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                            placeholder="Digite seu nome"
                        >
                    </div>
                    <div>
                        <label for="lastName" class="block text-sm font-medium text-gray-700">Sobrenome</label>
                        <input 
                            type="text" 
                            id="lastName" 
                            x-model="formData.lastName"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                            placeholder="Digite seu sobrenome"
                        >
                    </div>
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input 
                        type="email" 
                        id="email" 
                        x-model="formData.email"
                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        placeholder="seu@email.com"
                    >
                </div>
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700">Telefone</label>
                    <input 
                        type="tel" 
                        id="phone" 
                        x-model="formData.phone"
                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        placeholder="(11) 99999-9999"
                    >
                </div>
                <div class="flex justify-end space-x-3">
                    <button 
                        type="button" 
                        class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                    >
                        Cancelar
                    </button>
                    <button 
                        type="submit" 
                        class="bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                    >
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Variações -->
    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Variações</h2>
        
        <!-- Formulário com Validação -->
        <div class="space-y-2">
            <h3 class="text-lg font-medium">Formulário com Validação</h3>
            <div class="border rounded-lg p-4">
                <form class="space-y-6" x-data="{ 
                    formData: { email: '', password: '', confirmPassword: '' },
                    errors: {},
                    
                    validateForm() {
                        this.errors = {};
                        
                        if (!this.formData.email) {
                            this.errors.email = 'Email é obrigatório';
                        } else if (!/\S+@\S+\.\S+/.test(this.formData.email)) {
                            this.errors.email = 'Email inválido';
                        }
                        
                        if (!this.formData.password) {
                            this.errors.password = 'Senha é obrigatória';
                        } else if (this.formData.password.length < 6) {
                            this.errors.password = 'Senha deve ter pelo menos 6 caracteres';
                        }
                        
                        if (!this.formData.confirmPassword) {
                            this.errors.confirmPassword = 'Confirmação de senha é obrigatória';
                        } else if (this.formData.password !== this.formData.confirmPassword) {
                            this.errors.confirmPassword = 'Senhas não coincidem';
                        }
                        
                        return Object.keys(this.errors).length === 0;
                    },
                    
                    submitForm() {
                        if (this.validateForm()) {
                            alert('Formulário válido!');
                        }
                    }
                }">
                    <div>
                        <label for="validatedEmail" class="block text-sm font-medium text-gray-700">Email *</label>
                        <input 
                            type="email" 
                            id="validatedEmail" 
                            x-model="formData.email"
                            @blur="validateForm()"
                            :class="{ 'border-red-300': errors.email }"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                            placeholder="seu@email.com"
                        >
                        <p x-show="errors.email" class="mt-2 text-sm text-red-600" x-text="errors.email"></p>
                    </div>
                    <div>
                        <label for="validatedPassword" class="block text-sm font-medium text-gray-700">Senha *</label>
                        <input 
                            type="password" 
                            id="validatedPassword" 
                            x-model="formData.password"
                            @blur="validateForm()"
                            :class="{ 'border-red-300': errors.password }"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                            placeholder="••••••••"
                        >
                        <p x-show="errors.password" class="mt-2 text-sm text-red-600" x-text="errors.password"></p>
                    </div>
                    <div>
                        <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirmar Senha *</label>
                        <input 
                            type="password" 
                            id="confirmPassword" 
                            x-model="formData.confirmPassword"
                            @blur="validateForm()"
                            :class="{ 'border-red-300': errors.confirmPassword }"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                            placeholder="••••••••"
                        >
                        <p x-show="errors.confirmPassword" class="mt-2 text-sm text-red-600" x-text="errors.confirmPassword"></p>
                    </div>
                    <div class="flex justify-end">
                        <button 
                            type="button" 
                            @click="submitForm()"
                            class="bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                        >
                            Criar Conta
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Formulário Complexo -->
        <div class="space-y-2">
            <h3 class="text-lg font-medium">Formulário Complexo</h3>
            <div class="border rounded-lg p-4">
                <form class="space-y-8" x-data="{ 
                    formData: { 
                        profile: { name: '', email: '', bio: '' },
                        address: { street: '', city: '', state: '', zip: '' },
                        preferences: { notifications: true, newsletter: false, theme: 'light' }
                    }
                }">
                    <!-- Seção Perfil -->
                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-4">Informações Pessoais</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="profileName" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                                <input 
                                    type="text" 
                                    id="profileName" 
                                    x-model="formData.profile.name"
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                    placeholder="Seu nome completo"
                                >
                            </div>
                            <div>
                                <label for="profileEmail" class="block text-sm font-medium text-gray-700">Email</label>
                                <input 
                                    type="email" 
                                    id="profileEmail" 
                                    x-model="formData.profile.email"
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                    placeholder="seu@email.com"
                                >
                            </div>
                        </div>
                        <div class="mt-6">
                            <label for="bio" class="block text-sm font-medium text-gray-700">Biografia</label>
                            <textarea 
                                id="bio" 
                                x-model="formData.profile.bio"
                                rows="3"
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                placeholder="Conte um pouco sobre você..."
                            ></textarea>
                        </div>
                    </div>

                    <!-- Seção Endereço -->
                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-4">Endereço</h4>
                        <div class="grid grid-cols-1 gap-6">
                            <div>
                                <label for="street" class="block text-sm font-medium text-gray-700">Rua</label>
                                <input 
                                    type="text" 
                                    id="street" 
                                    x-model="formData.address.street"
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                    placeholder="Rua, número, complemento"
                                >
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label for="city" class="block text-sm font-medium text-gray-700">Cidade</label>
                                    <input 
                                        type="text" 
                                        id="city" 
                                        x-model="formData.address.city"
                                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                        placeholder="Cidade"
                                    >
                                </div>
                                <div>
                                    <label for="state" class="block text-sm font-medium text-gray-700">Estado</label>
                                    <select 
                                        id="state" 
                                        x-model="formData.address.state"
                                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                    >
                                        <option value="">Selecione</option>
                                        <option value="SP">São Paulo</option>
                                        <option value="RJ">Rio de Janeiro</option>
                                        <option value="MG">Minas Gerais</option>
                                        <option value="RS">Rio Grande do Sul</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="zip" class="block text-sm font-medium text-gray-700">CEP</label>
                                    <input 
                                        type="text" 
                                        id="zip" 
                                        x-model="formData.address.zip"
                                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                        placeholder="00000-000"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Seção Preferências -->
                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-4">Preferências</h4>
                        <div class="space-y-6">
                            <div>
                                <label class="text-sm font-medium text-gray-700">Tema</label>
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-center">
                                        <input 
                                            type="radio" 
                                            id="themeLight" 
                                            name="theme" 
                                            value="light"
                                            x-model="formData.preferences.theme"
                                            class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"
                                        >
                                        <label for="themeLight" class="ml-2 block text-sm text-gray-900">Claro</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input 
                                            type="radio" 
                                            id="themeDark" 
                                            name="theme" 
                                            value="dark"
                                            x-model="formData.preferences.theme"
                                            class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"
                                        >
                                        <label for="themeDark" class="ml-2 block text-sm text-gray-900">Escuro</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input 
                                            type="radio" 
                                            id="themeSystem" 
                                            name="theme" 
                                            value="system"
                                            x-model="formData.preferences.theme"
                                            class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"
                                        >
                                        <label for="themeSystem" class="ml-2 block text-sm text-gray-900">Sistema</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="flex items-center">
                                    <input 
                                        type="checkbox" 
                                        id="notifications" 
                                        x-model="formData.preferences.notifications"
                                        class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                                    >
                                    <label for="notifications" class="ml-2 block text-sm text-gray-900">Receber notificações</label>
                                </div>
                                <div class="flex items-center">
                                    <input 
                                        type="checkbox" 
                                        id="newsletter" 
                                        x-model="formData.preferences.newsletter"
                                        class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                                    >
                                    <label for="newsletter" class="ml-2 block text-sm text-gray-900">Receber newsletter</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Botões -->
                    <div class="flex justify-end space-x-3">
                        <button 
                            type="button" 
                            class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                        >
                            Cancelar
                        </button>
                        <button 
                            type="submit" 
                            class="bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                        >
                            Salvar Configurações
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Parâmetros -->
    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Parâmetros</h2>
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        {% for header in form_params.headers %}
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            {{ header }}
                        </th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    {% for row in form_params.data %}
                    <tr>
                        {% for cell in row %}
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            {{ cell|safe }}
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %} 